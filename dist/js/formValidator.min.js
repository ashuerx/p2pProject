$(function(){$("#userform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度必须在6-18之间"}}},password1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,message:"密码长度必须大于6位"}}},password2:{validators:{notEmpty:{message:"确认密码不能为空"},identical:{field:"password1",message:"两次密码不一致"}}},mobile:{validators:{notEmpty:{message:"手机号码必须填写"},regexp:{regexp:/^[1][3,4,5,7,8,9][0-9]{9}$/,message:"手机号码格式不正确，格式：13900000000"}}},realname:{validators:{notEmpty:{message:"真实姓名不能为空"}},sex:{validators:{notEmpty:{message:"性别不能为空"}}},isAgree:{validators:{notEmpty:{message:"请选择协议"}}}}}}).on("success.form.bv",function(o){o.preventDefault();var e=$(o.target),a=(e.data("bootstrapValidator"),e.serialize());$.post("../../api/userAdd.php",a,function(o){if(console.log("服务器返回结果",o),$("#regLoginModal .modal-title").text("用户注册提示"),o.isSuccess){$("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+o.msg+"等待 <span id='count'>3</span> 秒后自动跳转"),$("#regLoginModal").modal("show");var e=3,a=setInterval(function(){e--,$("#count").text(e),0==e&&(clearInterval(a),location.href="../../login.php")},1e3)}else $("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"+o.msg),$("#regLoginModal").modal("show"),console.log(o.msg)},"json")})}),$(function(){$("#loginform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度必须在6-18之间"},regexp:{regexp:/^[a-zA-Z0-9_\.]+$/,message:"The username can only consist of alphabetical, number, dot and underscore"}}},password1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,message:"密码长度必须大于6位"}}}}}).on("success.form.bv",function(o){o.preventDefault();var e=$(o.target),a=(e.data("bootstrapValidator"),e.serialize());$.post("../../api/loginCheck.php",a,function(o){if($("#regLoginModal .modal-title").text("用户注册提示"),o.isSuccess){$("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+o.msg+"等待 <span id='count'>3</span> 秒后自动跳转"),$("#regLoginModal").modal("show");var e=3,a=setInterval(function(){e--,$("#count").text(e),0==e&&(clearInterval(a),location.href="../../personal.php")},1e3)}else $("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"+o.msg),$("#regLoginModal").modal("show"),console.log(o.msg)},"json")})});